# FFXIV Dawntrail Benchmark Configuration
# This is a STANDALONE benchmark - not launched via Steam
metadata:
  game_name: "Final Fantasy XIV: Dawntrail"
  preset_id: final-fantasy-xiv-dawntrail  # Maps to preset-manager folder name

  # Standalone game configuration - find by folder name in steamapps/common/
  standalone: true
  folder_names:
    - "ffxiv-dawntrail-bench_v11"
    - "ffxiv-dawntrail-bench_v12"
    - "ffxiv-dawntrail-bench"
    - "FFXIV Dawntrail Benchmark"
  exe_name: "ffxiv-dawntrail-bench.exe"
  preset_filename: "ffxivbenchmarklauncher.ini"  # Config file to flash with preset

  # Process detection - wait for launcher process after exe launch
  # Note: ffxiv_dx11.exe (benchmark) starts after clicking Start in step 1
  # Step 2 has a 380s wait which covers the benchmark duration
  process_id: "ffxiv-dawntrail-bench.exe"

  # Window management - minimize other windows before automation
  minimize_others: true

  version: "1.0"
  benchmark_duration: 400
  startup_wait: 15
  init_wait: 5  # Short wait after launcher detected, before clicking Start
  resolution: "1920x1080"
  preset: "High"

# Simple step-by-step workflow
steps:
#TODO: need to handle once its appearing , it will only appear for the very fist time
  # 1:
  #   description: "Handle agreement page if exists"
  #   find:
  #     type: "any"  # Match any element type
  #     text: "Never display this message again."
  #     text_match: "contains"
  #   action:
  #     type: "click"
  #     button: "left"
  #     move_duration: 0.5
  #     click_delay: 0.5
  #   verify_success:
  #     - type: "any"
  #       text: "Start"
  #       text_match: "contains"
  #   expected_delay: 20
  #   timeout: 10


  1:
    description: "Click on start button to run benchmark"
    find:
      type: "any" 
      text: "Start"
      text_match: "exact"
    action:
      type: "click"
      button: "left"
      move_duration: 0.5
      click_delay: 0.5
    expected_delay: 10
    timeout: 20

  2:
    description: "Benchmark run start"
    action:
      type: "wait"
      duration: 380
    expected_delay: 0
    timeout: 600

  3:
    description: "exit benchmark"
    find:
      type: "any"
      text: "Close"
      text_match: "contains"
    action:
      type: "click"
      button: "left"
      move_duration: 0.5
      click_delay: 0.5
    expected_delay: 30
    timeout: 10

  4:
    description: "confirm exit benchmark"
    find:
      type: "any"
      text: "ok"
      text_match: "exact"
    action:
      type: "click"
      button: "left"
      move_duration: 0.5
      click_delay: 0.5
    expected_delay: 30
    timeout: 10

  # Fallback actions
fallbacks:
  general:
    action: "key"
    key: "Escape"
    expected_delay: 1
    max_retries: 3
