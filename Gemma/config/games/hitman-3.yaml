metadata:
  game_name: HITMAN 3
  preset_id: hitman-3-dubai  # Maps to preset-manager folder name
  steam_app_id: '1847520'
  version: '1.0'
  created_with: Katana Workflow Builder
  created_date: '2025-11-08 02:03:18'
  path: '1847520'
  process_id: Launcher
  process_name: Launcher.exe
  game_process: HITMAN3  # The actual game process to track after launcher
  benchmark_name: Built-in Benchmark - Dubai
  benchmark_duration: 130
  startup_wait: 20  # Increased to allow launcher -> game transition
  resolution: 1920x1080
  preset: High
  engine: Glacier 2
  graphics_api: DirectX 12
  use_ocr_fallback: true  # Enable automatic OCR config fallback on detection failure
  ocr_config:  # Game-level OCR defaults (Hitman 3 has stylized fonts - try EasyOCR)
    use_paddleocr: false  # EasyOCR handles stylized fonts better
    text_threshold: 0.6   # Lower threshold for stylized text
steps:
  1:
    description: Click OPTIONS button in game menu
    find:
      type: any
      text: OPTIONS
      text_match: contains
    action:
      type: click
      button: left
      move_duration: 0.2
      click_delay: 0.7
    expected_delay: 5
    timeout: 60
  2:
    description: Scroll down to benchmark option
    find:
      type: any
      text: Ray Tracing
      text_match: contains
    action:
      type: scroll
      direction: down
      clicks: 5
    verify_success:
    - type: any
      text: Start Benchmark
      text_match: contains
    expected_delay: 5
    timeout: 20
  3:
    description: Click Start Benchmark
    find:
      type: any
      text: Start Benchmark
      text_match: contains
    action:
      type: click
      button: left
      move_duration: 0.2
      click_delay: 0.7
    expected_delay: 3
    timeout: 20
  4:
    description: Wait for benchmark to complete
    action:
      type: wait
      duration: 130
    expected_delay: 0
    timeout: 20

  5:
    description: "Click on cancel button"
    find:
      type: "any"
      text: "Cancel"
      text_match: "contains"
    action:
      type: "click"
      button: "left"
      clickType: "ctypes"
      move_duration: 0.2
      click_delay: 0.7
    verify_success:
      - type: "any"
        text: "QUIT"
        text_match: "contains"
    expected_delay: 5
    timeout: 10

  6:
    description: "Click on quit button"
    find:
      type: "any"
      text: "QUIT"
      text_match: "contains"
    action:
      type: "click"
      button: "left"
      clickType: "ctypes"
      move_duration: 0.2
      click_delay: 0.7
    expected_delay: 5
    timeout: 10

# Enhanced fallback actions
fallbacks:
  general:
    action: "key"
    key: "Escape"
    expected_delay: 2
    max_retries: 3

  # Specific fallback for stuck benchmark
  benchmark_stuck:
    action: "key"
    key: "Alt+F4"
    expected_delay: 3
    max_retries: 2